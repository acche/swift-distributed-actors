{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In this article, we’ll learn how to configure and use multiple "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/ClusterSystem"},{"type":"text","text":" instances to form a distributed system."}]},{"anchor":"Initializing-a-ClusterSystem","level":2,"type":"heading","text":"Initializing a ClusterSystem"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In this section, we will discuss initializing and using a distributed cluster system."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"First, import the "},{"type":"codeVoice","code":"Distributed"},{"type":"text","text":" module to enable the capability to declare "},{"type":"codeVoice","code":"distributed actor"},{"type":"text","text":" types,"},{"type":"text","text":" "},{"type":"text","text":"and the "},{"type":"codeVoice","code":"DistributedCluster"},{"type":"text","text":" module which is the main module of the cluster library which contains the "},{"type":"codeVoice","code":"ClusterSystem"},{"type":"text","text":" types."}]},{"type":"codeListing","syntax":"swift","code":["import Distributed","import DistributedCluster"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Next, the first thing you need to do in your clustered applications is to create a "},{"type":"codeVoice","code":"ClusterSystem"},{"type":"text","text":"."},{"type":"text","text":" "},{"type":"text","text":"You can use the default "},{"type":"codeVoice","code":"ClusterSystem()"},{"type":"text","text":" initializer which defaults to a "},{"type":"codeVoice","code":"\"ClusterSystem\""},{"type":"text","text":" system name and the default "},{"type":"codeVoice","code":"127.0.0.1:7337"},{"type":"text","text":" host\/port:"}]},{"type":"codeListing","syntax":"swift","code":["let system = await ClusterSystem() \/\/ default 127.0.0.1:7337 bound actor system"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For more realistic uses, it is expected that you will configure your cluster system as you start it up, so here is how a typical "},{"type":"codeVoice","code":"Main"},{"type":"text","text":" struct of an server-side application might look like:"}]},{"type":"codeListing","syntax":"swift","code":["@main","struct Main {","    static func main() async throws {","        let system = await ClusterSystem(\"FirstSystem\") { settings in","            settings.endpoint.host = \"127.0.0.1\"","            settings.endpoint.port = 7337","        }","        ","        try await system.terminated","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"try await system.terminated"},{"type":"text","text":" will suspend the "},{"type":"codeVoice","code":"main()"},{"type":"text","text":" function until the cluster is shut down, by calling "},{"type":"codeVoice","code":"shutdown()"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Declaring a distributed actor is similar to declaring a plain "},{"type":"codeVoice","code":"actor"},{"type":"text","text":". We do this by prepending the actor declaration"}]},{"anchor":"Configuring-TLS","level":3,"type":"heading","text":"Configuring TLS"},{"type":"paragraph","inlineContent":[{"type":"text","text":"TODO: documentation of TLS config"}]},{"anchor":"Forming-clusters","level":2,"type":"heading","text":"Forming clusters"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Forming a cluster is the first step towards making use of distributed clusters across multiple nodes."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Once a node joins at least one other node of an already established cluster, it will receive information about all other nodes"},{"type":"text","text":" "},{"type":"text","text":"which participate in this cluster. This is why often it is not necessary to give all nodes the information about all other nodes in a cluster,"},{"type":"text","text":" "},{"type":"text","text":"but only attempt to join one or a few of them. The first join “wins” and the cluster welcome the new node into the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Membership"},{"type":"text","text":"."}]},{"anchor":"Joining-existing-nodes","level":3,"type":"heading","text":"Joining existing nodes"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In the simplest scenario we already know about some existing node that we can join to form a cluster, or become part of a cluster that node already is in."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This is done using the system’s "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/ClusterControl"},{"type":"text","text":" object, like this:"}]},{"type":"codeListing","syntax":"swift","code":["system.cluster.join(endpoint: Cluster.Node(systemName: \"JoiningExample\", host: \"127.0.0.1\", port: 8228))"]},{"style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The difference between an "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Endpoint"},{"type":"text","text":" and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Node"},{"type":"text","text":" is that an "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Endpoint"},{"type":"text","text":" only represents"},{"type":"text","text":" "},{"type":"text","text":"where we expect a cluster node to be listening for connections – effectively a "},{"type":"codeVoice","code":"protocol"},{"type":"text","text":", "},{"type":"codeVoice","code":"host"},{"type":"text","text":" and "},{"type":"codeVoice","code":"port"},{"type":"text","text":" triplet."},{"type":"text","text":" "},{"type":"text","text":"While a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Node"},{"type":"text","text":" is a specific, unique, node that we have connected to and now know its exact unique node identifier."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Therefore, when reaching out to a node we know nothing about just yet, we use the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Endpoint"},{"type":"text","text":" type,"},{"type":"text","text":" "},{"type":"text","text":"and the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Node"},{"type":"text","text":" in all following interactions."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Furthermore, a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Member"},{"type":"text","text":" further enriches a node with information about its cluster membership status"},{"type":"text","text":" "},{"type":"text","text":"("},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/MemberStatus"},{"type":"text","text":" and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/MemberReachability"},{"type":"text","text":")."}]}],"type":"aside","name":"Note"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can observe "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Event"},{"type":"text","text":"s emitted by "},{"type":"codeVoice","code":"system.cluster.events"},{"type":"text","text":" ("},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/ClusterControl\/events"},{"type":"text","text":") in order to see when a node has been successfully joined."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"There is also convenience APIs available on "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/ClusterControl"},{"type":"text","text":" ("},{"type":"codeVoice","code":"system.cluster"},{"type":"text","text":"):"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/ClusterControl\/joined(endpoint:within:)"},{"type":"text","text":" which allows you to suspend until a specific node becomes "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/MemberStatus\/joining"},{"type":"text","text":" in the cluster membership, or"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/ClusterControl\/waitFor(_:_:within:)-1xiqo"},{"type":"text","text":" which allows you to suspend until a node reaches a specific "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/MemberStatus"},{"type":"text","text":"."}]}]}]},{"anchor":"Automatic-Node-Discovery","level":3,"type":"heading","text":"Automatic Node Discovery"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The cluster system uses "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/apple\/swift-service-discovery"},{"type":"text","text":" to discover nearby nodes it can connect to. This discovery step is only necessary to find IPs and ports on which we are expecting other cluster actor system instances to be running, the actual joining of the nodes is performed by the cluster itself. It can negotiate, and authenticate the other peer before establishing a connection with it (see also TODO: SECURITY)."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The cluster is able to use any node discovery mechanism that implements the "},{"type":"codeVoice","code":"ServiceDiscovery"},{"type":"text","text":" protocol that has an implementation of the "},{"type":"codeVoice","code":"ServiceDiscovery"},{"type":"text","text":" protocol. like for example: "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/tuplestream\/swift-k8s-service-discovery"},{"type":"text","text":" which implements discovery using the kubernetes (k8s) APIs:"}]},{"type":"codeListing","syntax":"swift","code":["import ServiceDiscovery","import K8sServiceDiscovery \/\/ See: tuplestream\/swift-k8s-service-discovery","import DistributedCluster","","ClusterSystem(\"Compile\") { settings in","    let discovery = K8sServiceDiscovery() ","    let target = K8sObject(labelSelector: [\"name\": \"actor-cluster\"], namespace: \"actor-cluster\")","    ","    settings.discovery = ServiceDiscoverySettings(discovery, service: target)","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Similarly, you can implement the "},{"overridingTitleInlineContent":[{"type":"text","text":"ServiceDiscovery"}],"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/apple\/swift-service-discovery","overridingTitle":"ServiceDiscovery"},{"type":"text","text":" protocol using any underlying technology you want,"},{"type":"text","text":" "},{"type":"text","text":"and this will then enable the cluster to locate nodes to contact and join automatically. It also benefits all other uses of service discovery in such new environment,"},{"type":"text","text":" "},{"type":"text","text":"so we encourage publishing your implementations if you’re able to!"}]},{"anchor":"Cluster-Events","level":2,"type":"heading","text":"Cluster Events"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Cluster events are events emitted by the cluster as changes happen to the lifecycle of members of the cluster."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Generally, one should not need to rely on the low-level clustering events emitted by the cluster and focus directly on "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Lifecycle"},{"type":"text","text":" which expresses cluster lifecycle events in terms of emitting signals about an actor’s termination. E.g. when a node an actor was known to be living on is declared as "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/MemberStatus\/down"},{"type":"text","text":" “terminated” signals are generated for all actors watching this actor. This way, you don’t usually have to think about specific nodes of a cluster, but rather focus only on the specific actor’s lifecycles you care about and want to be notified about their termination."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Having that said, some actors (or other parts of your program) may be interested in the raw event stream offered by the cluster system. For example, one can implement a stability report by observing how frequently "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/ReachabilityChange"},{"type":"text","text":" events are emitted, or take it one level further and implement your own "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/DowningStrategy"},{"type":"text","text":" based on observing those reachability changes."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Events emitted by the cluster, are always expressed in terms of cluster "},{"type":"emphasis","inlineContent":[{"type":"text","text":"members"}]},{"type":"text","text":" ("},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Member"},{"type":"text","text":"), which represent some concrete "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Node"},{"type":"text","text":" which is part of the membership. As soon as a node becomes part of the membership, even while it is only "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/MemberStatus\/joining"},{"type":"text","text":", events about it will be emitted by the cluster."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"A cluster member goes through the following phases in its lifecycle:"}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"cluster_lifecycle.png"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can listen to cluster events by subscribing to their async sequence available on the cluster control object, like this:"}]},{"type":"codeListing","syntax":"swift","code":["for await event in system.cluster.events {","    switch event {","    case .snapshot(let membership):","        \/\/ handle a snapshot of the current state of the cluster, ","        \/\/ followed by any events that happen since","        break","    case .membershipChange(let change):","        \/\/ some change in the cluster membership ","        \/\/ (See Cluster Membership documentation)","        break","    case .reachabilityChange(let change):","        \/\/ some change in the reachability of cluster members,","        \/\/ e.g. a node became \"unreachable\"","        break","    case .leadershipChange(let change):","        \/\/ a new cluster leader has been detected","        break","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can refer to the specific events in their API documentation:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Membership"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/MembershipChange"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/ReachabilityChange"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/LeadershipChange"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Another common pattern is to store a "},{"type":"codeVoice","code":"membership"},{"type":"text","text":" value and "},{"type":"codeVoice","code":"apply"},{"type":"text","text":" all later incoming objects to it."},{"type":"text","text":" "},{"type":"text","text":"As you "},{"type":"codeVoice","code":"apply"},{"type":"text","text":" these events, a change will be emitted signalling what changed, and you can react to it,"},{"type":"text","text":" "},{"type":"text","text":"or only observe the “current” status of the membership. This can be more precise than periodically polling the"},{"type":"text","text":" "},{"type":"codeVoice","code":"system.cluster.membership"},{"type":"text","text":" as that call only is a “snapshot” of the membership in a specific moment in time,"},{"type":"text","text":" "},{"type":"text","text":"and may miss nodes which appear for a short moment and are already removed from the membership when you’d check the "},{"type":"codeVoice","code":"system.cluster.membership"},{"type":"text","text":" "},{"type":"text","text":"the next time."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The following pattern will reliably always give you "},{"type":"emphasis","inlineContent":[{"type":"text","text":"all"}]},{"type":"text","text":" events that happened to affect the clusters’ membership,"},{"type":"text","text":" "},{"type":"text","text":"by applying all the incoming events one by one:"}]},{"type":"codeListing","syntax":"swift","code":["var membership = Cluster.Membership.empty","","for await event in system.cluster.events {","    if case .membershipChanged(let change) = event {","        guard change.node == system.cluster.node else {","            continue","        }","        guard change.isUp else {","            continue ","        }","","        try membership.apply(event)","        system.log.info(\"Hooray, this node is [UP]! Event: \\(event), membership: \\(membership)\")","        return","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"As an alternative to the general "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Membership\/apply(event:)"},{"type":"text","text":", which does not return details about the changes in membership the event caused,"},{"type":"text","text":" "},{"type":"text","text":"you can use the more specific "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Membership\/applyMembershipChange(_:)"},{"type":"text","text":", "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Membership\/applyLeadershipChange(_:)"},{"type":"text","text":", or "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Membership\/applyReachabilityChange(_:)"},{"type":"text","text":" in case you’d need this information."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Membership"},{"type":"text","text":" also offers a number of useful APIs to inspect the membership of the cluster, so familiarize yourself with its API when working with cluster membership."}]},{"style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"A new async\/await API might be offered that automates such “await for some node to reach some state” in the future, refer to "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/apple\/swift-distributed-actors\/issues\/948"},{"type":"text","text":" for more details."}]}],"type":"aside","name":"Note"},{"anchor":"Cluster-Leadership","level":2,"type":"heading","text":"Cluster Leadership"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The cluster has a few operations which must be performed in a consistent fashion, such as moving a joining member to the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/MemberStatus\/up"},{"type":"text","text":" state. Other member status changes such as becoming "},{"type":"codeVoice","code":"joining"},{"type":"text","text":" or "},{"type":"codeVoice","code":"down"},{"type":"text","text":" do not require such strict decision-making and are disseminated throughout the cluster even without a leader."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Which cluster member is designated a leader is decided by the configured "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/LeaderElection"},{"type":"text","text":" strategy."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"By default, the leader is selected in a coordination free method which relies on the membership state and member ordering."},{"type":"text","text":" "},{"type":"text","text":"For details, refer to the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Leadership\/LowestReachableMember"},{"type":"text","text":" documentation."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can configure leader election by changing the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/ClusterSystemSettings\/autoLeaderElection"},{"type":"text","text":" setting while initializing your "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/ClusterSystem"},{"type":"text","text":"."}]},{"anchor":"Customizing-Remote-Calls","level":2,"type":"heading","text":"Customizing Remote Calls"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Remote calls are at the heart of what makes distributed actors actually distributed."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"A call made on a remote distributed actor reference will cross network boundaries, and therefore may fail due to"},{"type":"text","text":" "},{"type":"text","text":"network issues, message loss, serialization errors, or other reasons such as the recipient node crashing as it"},{"type":"text","text":" "},{"type":"text","text":"processes the message. Even replies to remote calls could sometimes fail being delivered, so you might need to"},{"type":"text","text":" "},{"type":"text","text":"design your distributed actors with idempotency (the resilience of a method being called more than once, e.g. due to a retry) in mind."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"By default, to avoid “hanging” a remote caller forever on a suspended remote call as the recipient node fails to reply to it,"},{"type":"text","text":" "},{"type":"text","text":"for example because it (or the network itself), is currently unresponsive, remote calls have a default timeout configured."},{"type":"text","text":" "},{"type":"text","text":"If no reply is received within this duration, the call will fail with a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/RemoteCallError"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can configure the default timeout used by the cluster system during its initialization:"}]},{"type":"codeListing","syntax":"swift","code":["ClusterSystem() { settings in ","    settings.remoteCall.defaultTimeout = .seconds(5)","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can override the default timeout for a specific remote call:"}]},{"type":"codeListing","syntax":"swift","code":["try await RemoteCall.with(timeout: .seconds(5)) {","    try await worker.work()","}"]},{"anchor":"Remote-call-errors","level":3,"type":"heading","text":"Remote call errors"},{"type":"paragraph","inlineContent":[{"type":"text","text":"By default, if a remote call results in an error that is "},{"type":"codeVoice","code":"Codable"},{"type":"text","text":", the error is returned as-is. Non-"},{"type":"codeVoice","code":"Codable"},{"type":"text","text":" errors are"},{"type":"text","text":" "},{"type":"text","text":"converted to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/GenericRemoteCallError"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You may restrict which "},{"type":"codeVoice","code":"Codable"},{"type":"text","text":" errors get sent back to the caller through configuration:"}]},{"type":"codeListing","syntax":"swift","code":["ClusterSystem() { settings in ","    \/\/ By default, all `Codable` errors are allowed.","    settings.remoteCall.codableErrorAllowance = .all","}"]},{"type":"codeListing","syntax":"swift","code":["ClusterSystem() { settings in ","    \/\/ Only specific types are allowed. All others are returned as ``GenericRemoteCallError``.","    settings.remoteCall.codableErrorAllowance = ","        .custom(allowedTypes: [","            SomeCodableError.self, ","            AnotherCodableError.self","        ])","}"]},{"type":"codeListing","syntax":"swift","code":["ClusterSystem() { settings in ","    \/\/ All errors are returned as ``GenericRemoteCallError``.","    settings.remoteCall.codableErrorAllowance = .none","}"]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/distributedcluster\/clustering"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Clustering","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Clustering multiple actor system instances into a single Distributed Actor System."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Clustering","role":"article","modules":[{"name":"DistributedCluster"}]},"hierarchy":{"paths":[["doc:\/\/DistributedCluster\/documentation\/DistributedCluster"]]},"seeAlsoSections":[{"title":"Articles","identifiers":["doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Introduction","doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Lifecycle","doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Receptionist","doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/ClusterSingleton","doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Security","doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Observability"],"generated":true}],"references":{"cluster_lifecycle.png":{"alt":"A diagram showing that a node joins as joining, then becomes up, and later on down or removed. It also shows the reachable and unreachable states on the side.","type":"image","identifier":"cluster_lifecycle.png","variants":[{"url":"\/images\/cluster_lifecycle.png","traits":["1x","light"]}]},"https://github.com/apple/swift-service-discovery":{"title":"swift-service-discovery","titleInlineContent":[{"type":"text","text":"swift-service-discovery"}],"type":"link","identifier":"https:\/\/github.com\/apple\/swift-service-discovery","url":"https:\/\/github.com\/apple\/swift-service-discovery"},"doc://DistributedCluster/documentation/DistributedCluster/ClusterSingleton":{"role":"symbol","title":"ClusterSingleton","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"ClusterSingleton"}],"abstract":[{"type":"text","text":"A "},{"type":"emphasis","inlineContent":[{"type":"text","text":"cluster singleton"}]},{"type":"text","text":" is a conceptual distributed actor that is guaranteed to have at-most one"},{"type":"text","text":" "},{"type":"text","text":"instance within the cluster system among all of its "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/MemberStatus\/up"},{"type":"text","text":" members."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/ClusterSingleton","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ClusterSingleton"}],"url":"\/documentation\/distributedcluster\/clustersingleton"},"doc://DistributedCluster/documentation/DistributedCluster/Cluster/MemberStatus":{"role":"symbol","title":"Cluster.MemberStatus","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"MemberStatus"}],"abstract":[{"type":"text","text":"Describes the status of a member within the clusters lifecycle."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/MemberStatus","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MemberStatus"}],"url":"\/documentation\/distributedcluster\/cluster\/memberstatus"},"doc://DistributedCluster/documentation/DistributedCluster/Cluster/Membership/applyLeadershipChange(_:)":{"role":"symbol","title":"applyLeadershipChange(_:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"applyLeadershipChange"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"Cluster","preciseIdentifier":"s:18DistributedCluster0B0O"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"LeadershipChange","preciseIdentifier":"s:18DistributedCluster0B0O16LeadershipChangeV"},{"kind":"text","text":"?) "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Cluster","preciseIdentifier":"s:18DistributedCluster0B0O"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"LeadershipChange","preciseIdentifier":"s:18DistributedCluster0B0O16LeadershipChangeV"},{"kind":"text","text":"?"}],"abstract":[{"type":"text","text":"Alias for "},{"type":"codeVoice","code":"applyLeadershipChange(to:)"}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Membership\/applyLeadershipChange(_:)","kind":"symbol","type":"topic","url":"\/documentation\/distributedcluster\/cluster\/membership\/applyleadershipchange(_:)"},"doc://DistributedCluster/documentation/DistributedCluster/DowningStrategy":{"role":"symbol","title":"DowningStrategy","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"DowningStrategy"}],"abstract":[{"type":"text","text":"Allows implementing downing strategies, without having to re-implement and reinvent logging and subscription logic."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/DowningStrategy","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"DowningStrategy"}],"url":"\/documentation\/distributedcluster\/downingstrategy"},"doc://DistributedCluster/documentation/DistributedCluster":{"role":"collection","title":"DistributedCluster","abstract":[{"type":"text","text":"A peer-to-peer cluster actor system implementation for Swift."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster","kind":"symbol","type":"topic","url":"\/documentation\/distributedcluster"},"doc://DistributedCluster/documentation/DistributedCluster/ClusterControl":{"role":"symbol","title":"ClusterControl","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ClusterControl"}],"abstract":[{"type":"text","text":"Allows controlling the cluster, e.g. by issuing join\/down commands, or subscribing to cluster events."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/ClusterControl","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ClusterControl"}],"url":"\/documentation\/distributedcluster\/clustercontrol"},"doc://DistributedCluster/documentation/DistributedCluster/Cluster/ReachabilityChange":{"role":"symbol","title":"Cluster.ReachabilityChange","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ReachabilityChange"}],"abstract":[{"type":"text","text":"Emitted when the reachability of a member changes, as determined by a failure detector (e.g. "},{"type":"codeVoice","code":"SWIM"},{"type":"text","text":")."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/ReachabilityChange","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ReachabilityChange"}],"url":"\/documentation\/distributedcluster\/cluster\/reachabilitychange"},"doc://DistributedCluster/documentation/DistributedCluster/Cluster/Membership":{"role":"symbol","title":"Cluster.Membership","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Membership"}],"abstract":[{"type":"text","text":"Represents the set of members of this cluster."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Membership","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Membership"}],"url":"\/documentation\/distributedcluster\/cluster\/membership"},"doc://DistributedCluster/documentation/DistributedCluster/Cluster/LeadershipChange":{"role":"symbol","title":"Cluster.LeadershipChange","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"LeadershipChange"}],"abstract":[{"type":"text","text":"Emitted when a change in leader is decided."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/LeadershipChange","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"LeadershipChange"}],"url":"\/documentation\/distributedcluster\/cluster\/leadershipchange"},"doc://DistributedCluster/documentation/DistributedCluster/ClusterControl/events":{"role":"symbol","title":"events","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"events"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ClusterEventStream","preciseIdentifier":"s:18DistributedCluster0B11EventStreamV"}],"abstract":[{"type":"text","text":"Sequence of cluster events."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/ClusterControl\/events","kind":"symbol","type":"topic","url":"\/documentation\/distributedcluster\/clustercontrol\/events"},"doc://DistributedCluster/documentation/DistributedCluster/Cluster/MemberStatus/joining":{"role":"symbol","title":"Cluster.MemberStatus.joining","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"joining"}],"abstract":[{"type":"text","text":"Describes a node which is connected to at least one other member in the cluster,"},{"type":"text","text":" "},{"type":"text","text":"it may want to serve some traffic, however should await the leader moving it to .up"},{"type":"text","text":" "},{"type":"text","text":"before it takes on serious work."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/MemberStatus\/joining","kind":"symbol","type":"topic","url":"\/documentation\/distributedcluster\/cluster\/memberstatus\/joining"},"doc://DistributedCluster/documentation/DistributedCluster/Cluster/Membership/applyMembershipChange(_:)":{"role":"symbol","title":"applyMembershipChange(_:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"applyMembershipChange"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"Cluster","preciseIdentifier":"s:18DistributedCluster0B0O"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"MembershipChange","preciseIdentifier":"s:18DistributedCluster0B0O16MembershipChangeV"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Cluster","preciseIdentifier":"s:18DistributedCluster0B0O"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"MembershipChange","preciseIdentifier":"s:18DistributedCluster0B0O16MembershipChangeV"},{"kind":"text","text":"?"}],"abstract":[{"type":"text","text":"Interpret and apply passed in membership change as the appropriate join\/leave\/down action."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Membership\/applyMembershipChange(_:)","kind":"symbol","type":"topic","url":"\/documentation\/distributedcluster\/cluster\/membership\/applymembershipchange(_:)"},"doc://DistributedCluster/documentation/DistributedCluster/Cluster/MembershipChange":{"role":"symbol","title":"Cluster.MembershipChange","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"MembershipChange"}],"abstract":[{"type":"text","text":"Represents a change made to a "},{"type":"codeVoice","code":"Membership"},{"type":"text","text":", it can be received from gossip and shall be applied to local memberships,"},{"type":"text","text":" "},{"type":"text","text":"or may originate from local decisions (such as joining or downing)."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/MembershipChange","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MembershipChange"}],"url":"\/documentation\/distributedcluster\/cluster\/membershipchange"},"https://github.com/tuplestream/swift-k8s-service-discovery":{"title":"tuplestream\/swift-k8s-service-discovery","titleInlineContent":[{"type":"text","text":"tuplestream\/swift-k8s-service-discovery"}],"type":"link","identifier":"https:\/\/github.com\/tuplestream\/swift-k8s-service-discovery","url":"https:\/\/github.com\/tuplestream\/swift-k8s-service-discovery"},"doc://DistributedCluster/documentation/DistributedCluster/Cluster/Event":{"role":"symbol","title":"Cluster.Event","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"Event"}],"abstract":[{"type":"text","text":"Represents cluster events, most notably regarding membership and reachability of other members of the cluster."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Event","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Event"}],"url":"\/documentation\/distributedcluster\/cluster\/event"},"doc://DistributedCluster/documentation/DistributedCluster/RemoteCallError":{"role":"symbol","title":"RemoteCallError","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"RemoteCallError"}],"abstract":[],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/RemoteCallError","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"RemoteCallError"}],"url":"\/documentation\/distributedcluster\/remotecallerror"},"doc://DistributedCluster/documentation/DistributedCluster/Cluster/Membership/apply(event:)":{"role":"symbol","title":"apply(event:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"apply"},{"kind":"text","text":"("},{"kind":"externalParam","text":"event"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Cluster","preciseIdentifier":"s:18DistributedCluster0B0O"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Event","preciseIdentifier":"s:18DistributedCluster0B0O5EventO"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Applies any kind of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Event"},{"type":"text","text":" to the "},{"type":"codeVoice","code":"Membership"},{"type":"text","text":", modifying it appropriately."},{"type":"text","text":" "},{"type":"text","text":"This apply does not yield detailed information back about the type of change performed,"},{"type":"text","text":" "},{"type":"text","text":"and is useful as a catch-all to keep a "},{"type":"codeVoice","code":"Membership"},{"type":"text","text":" copy up-to-date, but without reacting on any specific transition."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Membership\/apply(event:)","kind":"symbol","type":"topic","url":"\/documentation\/distributedcluster\/cluster\/membership\/apply(event:)"},"doc://DistributedCluster/documentation/DistributedCluster/Cluster/Member":{"role":"symbol","title":"Cluster.Member","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Member"}],"abstract":[{"type":"text","text":"A "},{"type":"codeVoice","code":"Member"},{"type":"text","text":" is a node that is participating in a clustered system."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Member","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Member"}],"url":"\/documentation\/distributedcluster\/cluster\/member"},"doc://DistributedCluster/documentation/DistributedCluster/Cluster/Endpoint":{"role":"symbol","title":"Cluster.Endpoint","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Endpoint"}],"abstract":[{"type":"text","text":"An "},{"type":"codeVoice","code":"Endpoint"},{"type":"text","text":" is a triplet of protocol, host and port that a node is bound to."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Endpoint","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Endpoint"}],"url":"\/documentation\/distributedcluster\/cluster\/endpoint"},"doc://DistributedCluster/documentation/DistributedCluster/Cluster/MemberStatus/up":{"role":"symbol","title":"Cluster.MemberStatus.up","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"up"}],"abstract":[{"type":"text","text":"Describes a node which at some point was known to the leader and moved to "},{"type":"codeVoice","code":".up"},{"type":"text","text":" "},{"type":"text","text":"by whichever strategy it implements for this. Generally, up members are fully ready"},{"type":"text","text":" "},{"type":"text","text":"members of the cluster and are most likely known to many if not all other nodes in the cluster."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/MemberStatus\/up","kind":"symbol","type":"topic","url":"\/documentation\/distributedcluster\/cluster\/memberstatus\/up"},"doc://DistributedCluster/documentation/DistributedCluster/Leadership/LowestReachableMember":{"role":"symbol","title":"Leadership.LowestReachableMember","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"LowestReachableMember"}],"abstract":[{"type":"text","text":"Simple strategy which does not require any additional coordination from members to select a leader."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Leadership\/LowestReachableMember","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"LowestReachableMember"}],"url":"\/documentation\/distributedcluster\/leadership\/lowestreachablemember"},"doc://DistributedCluster/documentation/DistributedCluster/ClusterSystemSettings/autoLeaderElection":{"role":"symbol","title":"autoLeaderElection","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"autoLeaderElection"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ClusterSystemSettings","preciseIdentifier":"s:18DistributedCluster0B14SystemSettingsV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"LeadershipSelectionSettings","preciseIdentifier":"s:18DistributedCluster0B14SystemSettingsV019LeadershipSelectionD0V"}],"abstract":[],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/ClusterSystemSettings\/autoLeaderElection","kind":"symbol","type":"topic","url":"\/documentation\/distributedcluster\/clustersystemsettings\/autoleaderelection"},"doc://DistributedCluster/documentation/DistributedCluster/Cluster/MemberStatus/down":{"role":"symbol","title":"Cluster.MemberStatus.down","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"down"}],"abstract":[{"type":"text","text":"Describes a member believed to be “down”, either by announcement by the member itself, another member,"},{"type":"text","text":" "},{"type":"text","text":"a human operator, or an automatic failure detector. It is important to note that it is not a 100% guarantee"},{"type":"text","text":" "},{"type":"text","text":"that the member\/node process really is not running anymore, as detecting this with full confidence is not possible"},{"type":"text","text":" "},{"type":"text","text":"in distributed systems. It can be said however, that with as much confidence as the failure detector, or whichever"},{"type":"text","text":" "},{"type":"text","text":"mechanism triggered the "},{"type":"codeVoice","code":".down"},{"type":"text","text":" that node may indeed be down, or perhaps unresponsive (or too-slow to respond)"},{"type":"text","text":" "},{"type":"text","text":"that it shall be assumed as-if dead anyway."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/MemberStatus\/down","kind":"symbol","type":"topic","url":"\/documentation\/distributedcluster\/cluster\/memberstatus\/down"},"doc://DistributedCluster/documentation/DistributedCluster/Cluster/Membership/applyReachabilityChange(_:)":{"role":"symbol","title":"applyReachabilityChange(_:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"applyReachabilityChange"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"Cluster","preciseIdentifier":"s:18DistributedCluster0B0O"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"ReachabilityChange","preciseIdentifier":"s:18DistributedCluster0B0O18ReachabilityChangeV"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Cluster","preciseIdentifier":"s:18DistributedCluster0B0O"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Member","preciseIdentifier":"s:18DistributedCluster0B0O6MemberV"},{"kind":"text","text":"?"}],"abstract":[],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Membership\/applyReachabilityChange(_:)","kind":"symbol","type":"topic","url":"\/documentation\/distributedcluster\/cluster\/membership\/applyreachabilitychange(_:)"},"doc://DistributedCluster/documentation/DistributedCluster/ClusterControl/joined(endpoint:within:)":{"role":"symbol","title":"joined(endpoint:within:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"joined"},{"kind":"text","text":"("},{"kind":"externalParam","text":"endpoint"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Cluster","preciseIdentifier":"s:18DistributedCluster0B0O"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Endpoint","preciseIdentifier":"s:18DistributedCluster0B0O8EndpointV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"within"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Duration","preciseIdentifier":"s:s8DurationV"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Cluster","preciseIdentifier":"s:18DistributedCluster0B0O"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Member","preciseIdentifier":"s:18DistributedCluster0B0O6MemberV"},{"kind":"text","text":"?"}],"abstract":[{"type":"text","text":"Wait, within the given duration, until the passed in node has joined the cluster and become "},{"type":"reference","isActive":true,"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/MemberStatus\/up"},{"type":"text","text":"."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/ClusterControl\/joined(endpoint:within:)","kind":"symbol","type":"topic","url":"\/documentation\/distributedcluster\/clustercontrol\/joined(endpoint:within:)"},"doc://DistributedCluster/documentation/DistributedCluster/Introduction":{"role":"article","title":"Introducing Distributed Actors","abstract":[{"type":"text","text":"A high-level introduction to distributed actor systems."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Introduction","kind":"article","type":"topic","url":"\/documentation\/distributedcluster\/introduction"},"https://github.com/apple/swift-distributed-actors/issues/948":{"title":"#948","titleInlineContent":[{"type":"text","text":"#948"}],"type":"link","identifier":"https:\/\/github.com\/apple\/swift-distributed-actors\/issues\/948","url":"https:\/\/github.com\/apple\/swift-distributed-actors\/issues\/948"},"doc://DistributedCluster/documentation/DistributedCluster/Cluster/MemberReachability":{"role":"symbol","title":"Cluster.MemberReachability","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"MemberReachability"}],"abstract":[{"type":"text","text":"Reachability indicates a failure detectors assessment of the member node’s reachability,"},{"type":"text","text":" "},{"type":"text","text":"i.e. whether or not the node is responding to health check messages."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/MemberReachability","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MemberReachability"}],"url":"\/documentation\/distributedcluster\/cluster\/memberreachability"},"doc://DistributedCluster/documentation/DistributedCluster/GenericRemoteCallError":{"role":"symbol","title":"GenericRemoteCallError","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"GenericRemoteCallError"}],"abstract":[],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/GenericRemoteCallError","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"GenericRemoteCallError"}],"url":"\/documentation\/distributedcluster\/genericremotecallerror"},"doc://DistributedCluster/documentation/DistributedCluster/ClusterSystem":{"role":"symbol","title":"ClusterSystem","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"ClusterSystem"}],"abstract":[{"type":"text","text":"A "},{"type":"codeVoice","code":"ClusterSystem"},{"type":"text","text":" is a confined space which runs and manages Actors."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/ClusterSystem","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ClusterSystem"}],"url":"\/documentation\/distributedcluster\/clustersystem"},"doc://DistributedCluster/documentation/DistributedCluster/Cluster/Node":{"role":"symbol","title":"Cluster.Node","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Node"}],"abstract":[{"type":"text","text":"A "},{"type":"emphasis","inlineContent":[{"type":"text","text":"unique"}]},{"type":"text","text":" node which includes also the node’s unique "},{"type":"codeVoice","code":"UID"},{"type":"text","text":" which is used to disambiguate"},{"type":"text","text":" "},{"type":"text","text":"multiple incarnations of a system on the same host\/port part – similar to how an "},{"type":"codeVoice","code":"ActorIncarnation"},{"type":"text","text":" "},{"type":"text","text":"is used on the per-actor level."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Cluster\/Node","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Node"}],"url":"\/documentation\/distributedcluster\/cluster\/node"},"doc://DistributedCluster/documentation/DistributedCluster/Lifecycle":{"role":"article","title":"Lifecycle Monitoring","abstract":[{"type":"text","text":"Monitoring distributed actor lifecycles regardless of their location."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Lifecycle","kind":"article","type":"topic","url":"\/documentation\/distributedcluster\/lifecycle"},"doc://DistributedCluster/documentation/DistributedCluster/Receptionist":{"role":"article","title":"Receptionist","abstract":[{"type":"text","text":"Discovering actors is an important aspect of distributed programming, as it is "},{"type":"emphasis","inlineContent":[{"type":"text","text":"the"}]},{"type":"text","text":" primary way we can discover actors on other nodes,"},{"type":"text","text":" "},{"type":"text","text":"and communicate with them."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Receptionist","kind":"article","type":"topic","url":"\/documentation\/distributedcluster\/receptionist"},"doc://DistributedCluster/documentation/DistributedCluster/Security":{"role":"article","title":"Security","abstract":[{"type":"text","text":"Configuring security aspects of your cluster system."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Security","kind":"article","type":"topic","url":"\/documentation\/distributedcluster\/security"},"doc://DistributedCluster/documentation/DistributedCluster/LeaderElection":{"role":"symbol","title":"LeaderElection","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"LeaderElection"}],"abstract":[{"type":"text","text":"Leader election allows for determining a “leader” node among members."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/LeaderElection","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"LeaderElection"}],"url":"\/documentation\/distributedcluster\/leaderelection"},"doc://DistributedCluster/documentation/DistributedCluster/ClusterControl/waitFor(_:_:within:)-1xiqo":{"role":"symbol","title":"waitFor(_:_:within:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"waitFor"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"Cluster","preciseIdentifier":"s:18DistributedCluster0B0O"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Node","preciseIdentifier":"s:18DistributedCluster0B0O4NodeV"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Cluster","preciseIdentifier":"s:18DistributedCluster0B0O"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"MemberStatus","preciseIdentifier":"s:18DistributedCluster0B0O12MemberStatusO"},{"kind":"text","text":", "},{"kind":"externalParam","text":"within"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Duration","preciseIdentifier":"s:s8DurationV"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Cluster","preciseIdentifier":"s:18DistributedCluster0B0O"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Member","preciseIdentifier":"s:18DistributedCluster0B0O6MemberV"}],"abstract":[{"type":"text","text":"Wait, within the given duration, for this actor system to be a member of the node’s cluster and have the specified status."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/ClusterControl\/waitFor(_:_:within:)-1xiqo","kind":"symbol","type":"topic","url":"\/documentation\/distributedcluster\/clustercontrol\/waitfor(_:_:within:)-1xiqo"},"doc://DistributedCluster/documentation/DistributedCluster/Observability":{"role":"article","title":"Observability","abstract":[{"type":"text","text":"The cluster system offers a number of built-in observability capabilities about the state of the cluster, as well as distributed actors it manages."}],"identifier":"doc:\/\/DistributedCluster\/documentation\/DistributedCluster\/Observability","kind":"article","type":"topic","url":"\/documentation\/distributedcluster\/observability"}}}